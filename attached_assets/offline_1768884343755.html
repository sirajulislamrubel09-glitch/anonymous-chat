<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Offline - Vaultify</title>

  <link href="https://fonts.googleapis.com/css?family=Outfit:400,600,800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root{
      --p1:#a78bfa;
      --p2:#7c3aed;
      --cyan:#22d3ee;

      --bg0:#060318;
      --bg1:#090626;

      --text:#f3f4f6;
      --muted:rgba(243,244,246,.78);

      --stroke:rgba(255,255,255,.10);
      --glass:rgba(255,255,255,.06);

      --shadow: 0 22px 60px rgba(0,0,0,.55);
      --inner: inset 0 1px 0 rgba(255,255,255,.08);

      --danger:#fb7185;

      color-scheme: dark;

      --sat: env(safe-area-inset-top, 0px);
      --sar: env(safe-area-inset-right, 0px);
      --sab: env(safe-area-inset-bottom, 0px);
      --sal: env(safe-area-inset-left, 0px);
    }

    *{ margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; user-select:none; }
    html, body{ height:100%; }
    html{ background:var(--bg0); overflow:hidden; -webkit-text-size-adjust:100%; text-size-adjust:100%; }

    body{
      min-height:100dvh;
      min-height:100vh;

      padding-top: calc(22px + var(--sat));
      padding-right: calc(22px + var(--sar));
      padding-bottom: calc(22px + var(--sab));
      padding-left: calc(22px + var(--sal));

      font-family:'Outfit', sans-serif;
      color:var(--text);

      display:flex;
      align-items:center;
      justify-content:center;

      overflow:hidden;
      overscroll-behavior:none;
      -webkit-overflow-scrolling:touch;
      touch-action:manipulation;

      /* Keep the same feel, but lighter */
      background:
        radial-gradient(900px 650px at 18% 12%, rgba(124,58,237,.22), transparent 58%),
        radial-gradient(700px 520px at 85% 25%, rgba(34,211,238,.11), transparent 60%),
        radial-gradient(900px 520px at 52% 120%, rgba(167,139,250,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
    }

    /* Lightweight AI pattern layer (no huge SVG / no data-uri noise) */
    .ai-bg{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
    }

    /* two subtle glows (reduced blur sizes) */
    .glow{
      position:absolute;
      width: 460px; height: 460px;
      border-radius:50%;
      filter: blur(60px);
      opacity:.18;
      background: radial-gradient(circle at 30% 30%, rgba(167,139,250,.90), rgba(167,139,250,0) 60%);
      animation: drift 12s ease-in-out infinite alternate;
      will-change: transform;
    }
    .glow.g2{
      width: 380px; height: 380px;
      left: 70%;
      top: 58%;
      opacity:.14;
      filter: blur(58px);
      background: radial-gradient(circle at 40% 40%, rgba(34,211,238,.80), rgba(34,211,238,0) 60%);
      animation-duration: 15s;
    }

    /* faint perspective grid (smaller area + less opacity) */
    .grid{
      position:absolute;
      inset:-20%;
      background:
        linear-gradient(to right, rgba(167,139,250,.07) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(167,139,250,.05) 1px, transparent 1px);
      background-size: 46px 46px;
      transform: perspective(680px) rotateX(62deg);
      transform-origin:center;
      opacity:.14;
      mask-image: radial-gradient(circle at 50% 40%, rgba(0,0,0,.95), transparent 65%);
    }

    /* “neural nodes” pattern using radial gradients (cheap to parse, no SVG) */
    .nodes{
      position:absolute;
      inset:0;
      opacity:.22;
      background:
        radial-gradient(circle at 20% 30%, rgba(167,139,250,.65) 0 2px, transparent 3px),
        radial-gradient(circle at 65% 22%, rgba(34,211,238,.55) 0 2px, transparent 3px),
        radial-gradient(circle at 78% 62%, rgba(167,139,250,.55) 0 2px, transparent 3px),
        radial-gradient(circle at 32% 72%, rgba(34,211,238,.50) 0 2px, transparent 3px);
      filter: drop-shadow(0 10px 26px rgba(124,58,237,.18));
    }

    @keyframes drift{
      from{ transform: translate(-18%, -16%); }
      to{ transform: translate(16%, 20%); }
    }

    /* Floating chips */
    .floaters{ position:absolute; inset:0; pointer-events:none; }
    .chip{
      position:absolute;
      width: 64px; height: 64px;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 46px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.10);
      display:grid;
      place-items:center;
      transform: rotate(-8deg);
      animation: bob 4.6s ease-in-out infinite;
      will-change: transform;
    }
    .chip i{
      font-size: 22px;
      background: linear-gradient(135deg, #fff, var(--p1), var(--cyan));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      opacity:.95;
    }
    .chip.c1{ left: 10%; top: 14%; animation-duration: 4.9s; transform: rotate(-10deg); }
    .chip.c2{ right: 12%; top: 22%; width:54px; height:54px; border-radius: 16px; animation-duration: 5.7s; transform: rotate(12deg); }
    .chip.c3{ left: 14%; bottom: 14%; width:58px; height:58px; border-radius: 18px; animation-duration: 5.2s; transform: rotate(8deg); }
    .chip.c4{ right: 10%; bottom: 18%; width:70px; height:70px; border-radius: 22px; animation-duration: 6.0s; transform: rotate(-6deg); }

    @keyframes bob{
      0%,100%{ transform: translateY(0) rotate(var(--r, -8deg)); }
      50%{ transform: translateY(-12px) rotate(var(--r, -8deg)); }
    }

    /* Main layout */
    .wrap{
      position:relative;
      width:100%;
      max-width:420px;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
    }

    /* Add .card wrapper back so your original JS shake works */
    .card{
      position:relative;
      width:100%;
      z-index:2;
    }

    .blob{
      position:absolute;
      left:50%;
      top:48%;
      transform: translate(-50%, -50%);
      width:min(420px, 92vw);
      height:320px;
      border-radius: 46% 54% 45% 55% / 55% 40% 60% 45%;
      background:
        radial-gradient(circle at 35% 25%, rgba(34,211,238,.15), transparent 55%),
        radial-gradient(circle at 75% 65%, rgba(167,139,250,.20), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow), var(--inner);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      animation: fadeUp .9s cubic-bezier(.16, 1, .3, 1);
    }

    .content{
      position:relative;
      padding: 34px 22px 18px;
      width: 100%;
      z-index: 2;
    }

    .topline{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:18px;
      padding:0 6px;
    }

    .brand{ display:flex; align-items:center; gap:10px; opacity:.95; min-width:0; }
    .brand-badge{
      width:34px; height:34px;
      border-radius:12px;
      display:grid; place-items:center;
      background: rgba(167,139,250,.14);
      border: 1px solid rgba(167,139,250,.30);
      box-shadow: 0 10px 22px rgba(124,58,237,.18);
      flex:0 0 auto;
    }
    .brand-badge i{ color:#ede9fe; font-size:16px; }
    .brand-name{
      font-weight:800;
      letter-spacing:-.5px;
      font-size:15.5px;
      line-height:1;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      text-align:left;
    }
    .brand-sub{
      font-size:12px;
      color: rgba(243,244,246,.65);
      margin-top:2px;
      line-height:1;
      text-align:left;
    }

    .status{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12px;
      color: #fecaca;
      background: rgba(244,63,94,.10);
      border: 1px solid rgba(244,63,94,.25);
      white-space: nowrap;
      flex:0 0 auto;
    }
    .dot{
      width:8px; height:8px;
      border-radius:999px;
      background: var(--danger);
      box-shadow: 0 0 0 4px rgba(244,63,94,.18);
    }

    h1{
      font-size:52px;
      line-height:1;
      letter-spacing:-1.6px;
      font-weight:800;
      margin: 6px 0 12px;
      background: linear-gradient(135deg, #fff, #ddd6fe, rgba(34,211,238,.95));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      text-shadow: 0 16px 45px rgba(124,58,237,.18);
      animation: fadeUp 1s ease-out .10s both;
    }

    .sub{
      font-size:14.5px;
      line-height:1.6;
      color: var(--muted);
      max-width: 320px;
      margin: 0 auto 18px;
      animation: fadeUp 1s ease-out .22s both;
    }

    .btn{
      width: min(260px, 74vw);
      border:none;
      border-radius:999px;
      padding:14px 18px;
      background: linear-gradient(135deg, var(--p1), var(--p2));
      color:#fff;
      font-weight:800;
      font-size:15px;
      letter-spacing:.4px;
      box-shadow: 0 18px 40px rgba(124,58,237,.32), inset 0 1px 0 rgba(255,255,255,.18);
      cursor:pointer;
      position:relative;
      overflow:hidden;
      transition: transform .18s cubic-bezier(.2,0,0,1), filter .18s;
      animation: fadeUp 1s ease-out .34s both;
    }
    .btn::after{
      content:"";
      position:absolute;
      inset:-40% -30%;
      background: linear-gradient(120deg, transparent 35%, rgba(255,255,255,.22), transparent 65%);
      transform: translateX(-60%) rotate(12deg);
      transition: transform .6s ease;
      pointer-events:none;
    }
    .btn:active{ transform: scale(.96); filter: brightness(1.06); }
    .btn:active::after{ transform: translateX(35%) rotate(12deg); }
    .btn:focus-visible{ outline:3px solid rgba(167,139,250,.55); outline-offset:3px; }

    .spinner{
      width: 20px; height: 20px;
      border: 3px solid rgba(255,255,255,0.32);
      border-top-color: #fff;
      border-radius: 50%;
      display: none;
      margin: 0 auto;
      animation: spin .8s linear infinite;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }

    .foot{
      margin-top:14px;
      font-size:12px;
      color: rgba(243,244,246,.62);
      animation: fadeUp 1s ease-out .46s both;
    }

    @keyframes fadeUp{
      from{ opacity:0; transform: translateY(10px); }
      to{ opacity:1; transform: translateY(0); }
    }

    @media (prefers-reduced-motion: reduce){
      .glow, .chip, .blob, h1, .sub, .btn, .foot{ animation:none !important; }
      .btn::after{ transition:none !important; }
      *{ scroll-behavior:auto !important; transition:none !important; }
    }
  </style>
</head>

<body>
  <div class="ai-bg" aria-hidden="true">
    <div class="glow"></div>
    <div class="glow g2"></div>
    <div class="grid"></div>
    <div class="nodes"></div>

    <div class="floaters">
      <div class="chip c1" style="--r:-10deg"><i class="fa-solid fa-microchip"></i></div>
      <div class="chip c2" style="--r:12deg"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
      <div class="chip c3" style="--r:8deg"><i class="fa-solid fa-brain"></i></div>
      <div class="chip c4" style="--r:-6deg"><i class="fa-solid fa-sitemap"></i></div>
    </div>
  </div>

  <div class="wrap">
    <div class="card">
      <div class="blob" aria-hidden="true"></div>

      <div class="content">
        <div class="topline">
          <div class="brand">
            <div class="brand-badge" aria-hidden="true">
              <i class="fa-solid fa-vault"></i>
            </div>
            <div>
              <div class="brand-name">Vaultify</div>
              <div class="brand-sub">Offline mode</div>
            </div>
          </div>

          <div class="status" role="status" aria-live="polite">
            <span class="dot" aria-hidden="true"></span>
            No connection
          </div>
        </div>

        <h1>Vaultify</h1>
        <div class="sub">
          Your AI knowledge vault is offline right now. Reconnect to sync your notes and continue where you left off.
        </div>

        <button class="btn" id="retryBtn" onclick="retry()">
          <span id="btnText">Let’s reconnect</span>
          <div class="spinner" id="loader"></div>
        </button>

        <div class="foot">We’ll automatically reconnect when you’re back online.</div>
      </div>
    </div>
  </div>

  <script>
    function retry() {
      // Haptic tap
      if (navigator.vibrate) navigator.vibrate(40);

      const text = document.getElementById('btnText');
      const loader = document.getElementById('loader');

      text.style.display = 'none';
      loader.style.display = 'block';

      setTimeout(() => {
        if (navigator.onLine) {
          window.location.href = "https://study-notes-app-green.vercel.app/index.html";
        } else {
          text.style.display = 'block';
          loader.style.display = 'none';
          // Error Shake
          document.querySelector('.card').animate([
            { transform: 'translateX(0px)' },
            { transform: 'translateX(-10px)' },
            { transform: 'translateX(10px)' },
            { transform: 'translateX(0px)' }
          ], { duration: 200 });
        }
      }, 1200);
    }

    // Auto-refresh when back online
    window.addEventListener('online', () => {
      window.location.href = "https://study-notes-app-green.vercel.app/index.html";
    });
  </script>
</body>
</html>
