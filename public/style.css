:root{
  --bg0:#050814;
  --bg1:#070b1a;
  --surface: rgba(255,255,255,.06);
  --surface2: rgba(255,255,255,.08);
  --stroke: rgba(255,255,255,.10);

  --text:#eaf0ff;
  --muted: rgba(234,240,255,.70);
  --muted2: rgba(234,240,255,.50);

  --accent:#8b5cf6;
  --accent2:#22d3ee;

  --danger:#ef4444;

  --r12:12px;
  --r16:16px;
  --r20:20px;
  --r24:24px;

  --shadow: 0 20px 60px rgba(0,0,0,.55);
}

*{margin:0;padding:0;box-sizing:border-box}
html{height:100%}
body{
  min-height:100%;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: radial-gradient(1200px 700px at 30% -10%, rgba(139,92,246,.22), transparent 60%),
              radial-gradient(900px 600px at 90% 0%, rgba(34,211,238,.18), transparent 55%),
              linear-gradient(180deg, var(--bg0), var(--bg1));
  color: var(--text);
}

/* App frame (mobile safe) */
.app{
  height: 100vh;
  height: 100dvh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 14px;
}

/* Card */
.container{
  width:100%;
  max-width: 540px;
  height: 100%;
  background: rgba(10, 14, 30, .62);
  border: 1px solid var(--stroke);
  border-radius: var(--r24);
  box-shadow: var(--shadow);
  backdrop-filter: blur(18px) saturate(140%);
  -webkit-backdrop-filter: blur(18px) saturate(140%);
  overflow:hidden;

  display:flex;
  flex-direction:column;
  min-height:0; /* important for inner scrolling */
}

/* Topbar */
.topbar{
  padding: 16px 16px 12px;
  border-bottom: 1px solid rgba(255,255,255,.08);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom: 12px;
}

.logo{
  width: 38px;
  height: 38px;
  border-radius: 12px;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), transparent 55%),
    linear-gradient(135deg, rgba(139,92,246,.95), rgba(34,211,238,.75));
  box-shadow: 0 12px 30px rgba(139,92,246,.22);
  border: 1px solid rgba(255,255,255,.14);
}

.brand-text h1{
  font-size: 16px;
  font-weight: 800;
  letter-spacing: -0.2px;
}
.tagline{
  font-size: 12px;
  color: var(--muted2);
  margin-top: 2px;
}

/* Status pill (your JS still uses #statusBar) */
.status-pill{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.05);
  color: var(--muted);
  font-size: 12px;
  line-height: 1;
}

.status-pill .dot{
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,.35);
  box-shadow: 0 0 0 3px rgba(255,255,255,.06);
}

/* keep your JS classes working: .connected and .waiting */
.status-pill.connected{
  border-color: rgba(34,211,238,.30);
  background: rgba(34,211,238,.08);
}
.status-pill.connected .dot{
  background: #22d3ee;
  box-shadow: 0 0 0 3px rgba(34,211,238,.12);
}

.status-pill.waiting{
  border-color: rgba(251,191,36,.28);
  background: rgba(251,191,36,.08);
}
.status-pill.waiting .dot{
  background:#fbbf24;
  box-shadow: 0 0 0 3px rgba(251,191,36,.12);
}

.typing-indicator{
  color: rgba(234,240,255,.75);
  font-style: italic;
  white-space: nowrap;
  animation: typingPulse 1.2s ease-in-out infinite;
}
@keyframes typingPulse{0%,100%{opacity:.9}50%{opacity:.35}}

/* Chat region */
.chat{
  flex:1;
  min-height:0;
  display:flex;
}

.chat-box{
  flex:1;
  min-height:0;
  overflow-y:auto;
  padding: 16px;
  scroll-behavior:smooth;
}

.chat-box::-webkit-scrollbar{width:6px}
.chat-box::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,.14);
  border-radius: 999px;
}

/* Welcome */
.welcome-message{
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.04);
  border-radius: var(--r20);
  padding: 18px;
  text-align:left;
}
.welcome-message h2{
  font-size: 18px;
  font-weight: 900;
  margin-bottom: 6px;
}
.welcome-message p{
  font-size: 13px;
  color: var(--muted);
  line-height: 1.45;
}
.welcome-message .note{
  margin-top: 10px;
  color: rgba(234,240,255,.55);
}

/* Messages (works with your JS structure) */
.message{
  display:flex;
  margin: 10px 0;
}
.message .message-content{
  max-width: min(78%, 440px);
  padding: 12px 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.05);
  color: var(--text);
  font-size: 14px;
  line-height: 1.45;
  overflow-wrap: anywhere;
}

/* You vs Stranger alignment */
.message.you{justify-content:flex-end;}
.message.stranger{justify-content:flex-start;}

.message.you .message-content{
  background: linear-gradient(135deg, rgba(139,92,246,.28), rgba(34,211,238,.18));
  border-color: rgba(139,92,246,.25);
  box-shadow: 0 10px 26px rgba(139,92,246,.14);
  border-bottom-right-radius: 6px;
}

.message.stranger .message-content{
  background: rgba(255,255,255,.045);
  border-color: rgba(255,255,255,.09);
  border-bottom-left-radius: 6px;
}

/* System message */
.system-message{
  margin: 14px 0;
  text-align:center;
  font-size: 12px;
  color: rgba(234,240,255,.55);
}

/* Composer */
.composer{
  border-top: 1px solid rgba(255,255,255,.08);
  background: linear-gradient(180deg, rgba(10, 14, 30, .35), rgba(10, 14, 30, .70));
  padding: 12px;
  flex-shrink:0;
}

.input-area{
  display:flex;
  gap:10px;
}

#messageInput{
  flex:1;
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color: var(--text);
  outline:none;
  font-size: 14px;
}
#messageInput::placeholder{color: rgba(234,240,255,.45)}
#messageInput:focus{
  border-color: rgba(34,211,238,.35);
  box-shadow: 0 0 0 4px rgba(34,211,238,.10);
}
#messageInput:disabled{opacity:.6; cursor:not-allowed;}

#sendBtn{
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background: linear-gradient(135deg, rgba(139,92,246,.95), rgba(34,211,238,.85));
  color: white;
  font-weight: 900;
  cursor:pointer;
  transition: transform .12s ease, filter .2s ease, opacity .2s ease;
}
#sendBtn:hover:not(:disabled){filter:brightness(1.05)}
#sendBtn:active:not(:disabled){transform:scale(.98)}
#sendBtn:disabled{opacity:.55; cursor:not-allowed;}

.action-buttons{
  display:flex;
  gap:10px;
  margin-top: 10px;
}

.primary-btn, .secondary-btn{
  flex:1;
  padding: 11px 12px;
  border-radius: 14px;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: .6px;
  text-transform: uppercase;
  cursor:pointer;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
  color: var(--text);
  transition: transform .12s ease, filter .2s ease, opacity .2s ease;
}

.primary-btn{
  background: rgba(34,211,238,.10);
  border-color: rgba(34,211,238,.22);
}
.secondary-btn{
  background: rgba(239,68,68,.10);
  border-color: rgba(239,68,68,.22);
}

.primary-btn:hover, .secondary-btn:hover{filter:brightness(1.08)}
.primary-btn:active, .secondary-btn:active{transform:scale(.99)}

.footer{
  margin-top: 10px;
  text-align:center;
  color: rgba(234,240,255,.45);
  font-size: 11px;
}

/* Desktop polish */
@media (min-width: 700px){
  .app{padding: 22px;}
  .container{height: min(92dvh, 820px);}
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  *{transition:none!important; animation:none!important; scroll-behavior:auto!important;}
}
